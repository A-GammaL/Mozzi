<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Cuttlefish: Oscil&lt; NUM_CELLS, UPDATE_RATE &gt; Class Template Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  <td id="projectlogo"><img alt="Logo" src="cuttle-smaller-clear-light.png"/></td>
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Cuttlefish
   &#160;<span id="projectnumber">alpha 0.01</span>
   </div>
   <div id="projectbrief">Sonic tentacles for Arduino</div>
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.8.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">Oscil&lt; NUM_CELLS, UPDATE_RATE &gt; Class Template Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><a class="el" href="class_oscil.html" title="Oscil plays a wavetable, cycling through the table to generate an audio or control signal...">Oscil</a> plays a wavetable, cycling through the table to generate an audio or control signal.  
 <a href="class_oscil.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_oscil_8h_source.html">Oscil.h</a>&gt;</code></p>

<p><a href="class_oscil-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a1728b1051a7344ad33b83ecdee92b087"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_oscil.html#a1728b1051a7344ad33b83ecdee92b087">Oscil</a> (prog_char *TABLE_NAME)</td></tr>
<tr class="memdesc:a1728b1051a7344ad33b83ecdee92b087"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="class_oscil.html" title="Oscil plays a wavetable, cycling through the table to generate an audio or control signal...">Oscil</a> is a template class, declared in a sketch as follows, with NUM_CELLS and UPDATE_RATE replaced by your own values: <a class="el" href="class_oscil.html" title="Oscil plays a wavetable, cycling through the table to generate an audio or control signal...">Oscil</a> &lt;NUM_CELLS, UPDATE_RATE&gt; myoscil(tablename); It's important that NUM_CELLS and UPDATE_RATE are both literal integers, directly stated as numbers (eg.  <a href="#a1728b1051a7344ad33b83ecdee92b087"></a><br/></td></tr>
<tr class="memitem:ae4a4cb7018246d92e91709f4854613c0"><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_oscil.html#ae4a4cb7018246d92e91709f4854613c0">next</a> ()</td></tr>
<tr class="memdesc:ae4a4cb7018246d92e91709f4854613c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the next sample.  <a href="#ae4a4cb7018246d92e91709f4854613c0"></a><br/></td></tr>
<tr class="memitem:ab27e7d343de7e35b3639d52e5d03b688"><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_oscil.html#ab27e7d343de7e35b3639d52e5d03b688">phMod</a> (long phmod_proportion)</td></tr>
<tr class="memdesc:ab27e7d343de7e35b3639d52e5d03b688"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the next sample given a phase modulation value.  <a href="#ab27e7d343de7e35b3639d52e5d03b688"></a><br/></td></tr>
<tr class="memitem:a6a4c35443595841b6fbe6416cdc64caf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_oscil.html#a6a4c35443595841b6fbe6416cdc64caf">setFreq_n8</a> (unsigned long freq)</td></tr>
<tr class="memdesc:a6a4c35443595841b6fbe6416cdc64caf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the frequency using 24n8 fixed-point number format.  <a href="#a6a4c35443595841b6fbe6416cdc64caf"></a><br/></td></tr>
<tr class="memitem:a1768d1756a570fc2fe461e6662dff654"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_oscil.html#a1768d1756a570fc2fe461e6662dff654">setFreq</a> (unsigned int freq)</td></tr>
<tr class="memdesc:a1768d1756a570fc2fe461e6662dff654"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the oscillator frequency with an unsigned int.  <a href="#a1768d1756a570fc2fe461e6662dff654"></a><br/></td></tr>
<tr class="memitem:aa53724b32bf6e136e06926fb46d20d59"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_oscil.html#aa53724b32bf6e136e06926fb46d20d59">setFreq</a> (float freq)</td></tr>
<tr class="memdesc:aa53724b32bf6e136e06926fb46d20d59"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the oscillator frequency with a float.  <a href="#aa53724b32bf6e136e06926fb46d20d59"></a><br/></td></tr>
<tr class="memitem:a8af1ff497b42c3b726f34997dbbc1a7f"><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_oscil.html#a8af1ff497b42c3b726f34997dbbc1a7f">atIndex</a> (unsigned int index)</td></tr>
<tr class="memdesc:a8af1ff497b42c3b726f34997dbbc1a7f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the sample at the given table index between 0 and the table size.The index rolls back around to 0 if it's larger than the table size.  <a href="#a8af1ff497b42c3b726f34997dbbc1a7f"></a><br/></td></tr>
<tr class="memitem:acb05afbf7b825abfdf52f2138d36d8b2"><td class="memItemLeft" align="right" valign="top">unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_oscil.html#acb05afbf7b825abfdf52f2138d36d8b2">phaseIncFromFreq</a> (unsigned int freq)</td></tr>
<tr class="memdesc:acb05afbf7b825abfdf52f2138d36d8b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">phaseIncFromFreq and setPhaseInc are for saving processor time when sliding between frequencies.  <a href="#acb05afbf7b825abfdf52f2138d36d8b2"></a><br/></td></tr>
<tr class="memitem:a6e36b0119d267ac23b38d04226dea5dd"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6e36b0119d267ac23b38d04226dea5dd"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_oscil.html#a6e36b0119d267ac23b38d04226dea5dd">setPhaseInc</a> (unsigned long phaseinc_fractional)</td></tr>
<tr class="memdesc:a6e36b0119d267ac23b38d04226dea5dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">See phaseIncFromFreq. <br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><h3>template&lt;unsigned int NUM_CELLS, unsigned int UPDATE_RATE&gt;<br/>
class Oscil&lt; NUM_CELLS, UPDATE_RATE &gt;</h3>

<p><a class="el" href="class_oscil.html" title="Oscil plays a wavetable, cycling through the table to generate an audio or control signal...">Oscil</a> plays a wavetable, cycling through the table to generate an audio or control signal. </p>
<p>The frequency of the signal can be set or changed with <a class="el" href="class_oscil.html#a1768d1756a570fc2fe461e6662dff654" title="Set the oscillator frequency with an unsigned int.">setFreq()</a>, and the output of an <a class="el" href="class_oscil.html" title="Oscil plays a wavetable, cycling through the table to generate an audio or control signal...">Oscil</a> can be produced with <a class="el" href="class_oscil.html#ae4a4cb7018246d92e91709f4854613c0" title="Returns the next sample.">next()</a> for a simple cycling oscillator, or <a class="el" href="class_oscil.html#a8af1ff497b42c3b726f34997dbbc1a7f" title="Returns the sample at the given table index between 0 and the table size.The index rolls back around ...">atIndex()</a> for a particular sample in the table. </p>

<p>Definition at line <a class="el" href="_oscil_8h_source.html#l00044">44</a> of file <a class="el" href="_oscil_8h_source.html">Oscil.h</a>.</p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a1728b1051a7344ad33b83ecdee92b087"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;unsigned int NUM_CELLS, unsigned int UPDATE_RATE&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_oscil.html">Oscil</a>&lt; NUM_CELLS, UPDATE_RATE &gt;::<a class="el" href="class_oscil.html">Oscil</a> </td>
          <td>(</td>
          <td class="paramtype">prog_char *&#160;</td>
          <td class="paramname"><em>TABLE_NAME</em></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="class_oscil.html" title="Oscil plays a wavetable, cycling through the table to generate an audio or control signal...">Oscil</a> is a template class, declared in a sketch as follows, with NUM_CELLS and UPDATE_RATE replaced by your own values: <a class="el" href="class_oscil.html" title="Oscil plays a wavetable, cycling through the table to generate an audio or control signal...">Oscil</a> &lt;NUM_CELLS, UPDATE_RATE&gt; myoscil(tablename); It's important that NUM_CELLS and UPDATE_RATE are both literal integers, directly stated as numbers (eg. </p>
<p>"8192") or as predefined macros. AUDIO_RATE is a defined literal used by Cuttlefish. It's useful to define CONTROL_RATE in your sketches ("eg. #define CONTROL_RATE 128"), to configure startCuttlefish(CONTROL_RATE) in setup() and to sync your control calculations using the same value in updateControl(). </p>

<p>Definition at line <a class="el" href="_oscil_8h_source.html#l00058">58</a> of file <a class="el" href="_oscil_8h_source.html">Oscil.h</a>.</p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a8af1ff497b42c3b726f34997dbbc1a7f"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;unsigned int NUM_CELLS, unsigned int UPDATE_RATE&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">char <a class="el" href="class_oscil.html">Oscil</a>&lt; NUM_CELLS, UPDATE_RATE &gt;::<a class="el" href="class_oscil.html#a8af1ff497b42c3b726f34997dbbc1a7f">atIndex</a> </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the sample at the given table index between 0 and the table size.The index rolls back around to 0 if it's larger than the table size. </p>

<p>Definition at line <a class="el" href="_oscil_8h_source.html#l00132">132</a> of file <a class="el" href="_oscil_8h_source.html">Oscil.h</a>.</p>

</div>
</div>
<a class="anchor" id="ae4a4cb7018246d92e91709f4854613c0"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;unsigned int NUM_CELLS, unsigned int UPDATE_RATE&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">char <a class="el" href="class_oscil.html">Oscil</a>&lt; NUM_CELLS, UPDATE_RATE &gt;::<a class="el" href="class_oscil.html#ae4a4cb7018246d92e91709f4854613c0">next</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the next sample. </p>
<p>Updates the phase according to the current frequency and returns the sample at the new phase position. </p>

<p>Definition at line <a class="el" href="_oscil_8h_source.html#l00066">66</a> of file <a class="el" href="_oscil_8h_source.html">Oscil.h</a>.</p>

</div>
</div>
<a class="anchor" id="acb05afbf7b825abfdf52f2138d36d8b2"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;unsigned int NUM_CELLS, unsigned int UPDATE_RATE&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">unsigned long <a class="el" href="class_oscil.html">Oscil</a>&lt; NUM_CELLS, UPDATE_RATE &gt;::<a class="el" href="class_oscil.html#acb05afbf7b825abfdf52f2138d36d8b2">phaseIncFromFreq</a> </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>freq</em></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>phaseIncFromFreq and setPhaseInc are for saving processor time when sliding between frequencies. </p>
<p>Instead of recalculating the phase increment for each frequency in between, you can just calculate each end and use a <a class="el" href="class_line.html" title="For linear changes with a minimum of calculation at each step.">Line</a> to interpolate. (Note: I should really profile this with the oscilloscope to see if it's worth the extra confusion.) </p>

<p>Definition at line <a class="el" href="_oscil_8h_source.html#l00144">144</a> of file <a class="el" href="_oscil_8h_source.html">Oscil.h</a>.</p>

</div>
</div>
<a class="anchor" id="ab27e7d343de7e35b3639d52e5d03b688"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;unsigned int NUM_CELLS, unsigned int UPDATE_RATE&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">char <a class="el" href="class_oscil.html">Oscil</a>&lt; NUM_CELLS, UPDATE_RATE &gt;::<a class="el" href="class_oscil.html#ab27e7d343de7e35b3639d52e5d03b688">phMod</a> </td>
          <td>(</td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>phmod_proportion</em></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the next sample given a phase modulation value. </p>
<p>The modulation is given as a proportion of the wave. The phmod_proportion parameter is a Q15n16 fixed-point number where to fractional n16 part is -1 to 1, modulating the phase by one whole table length in each direction. </p>

<p>Definition at line <a class="el" href="_oscil_8h_source.html#l00080">80</a> of file <a class="el" href="_oscil_8h_source.html">Oscil.h</a>.</p>

</div>
</div>
<a class="anchor" id="a1768d1756a570fc2fe461e6662dff654"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;unsigned int NUM_CELLS, unsigned int UPDATE_RATE&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_oscil.html">Oscil</a>&lt; NUM_CELLS, UPDATE_RATE &gt;::<a class="el" href="class_oscil.html#a1768d1756a570fc2fe461e6662dff654">setFreq</a> </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>freq</em></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set the oscillator frequency with an unsigned int. </p>
<p>This is faster than using a float, so it's useful when processor time is tight, but it can be tricky with low and high frequencies, depending on the size of the wavetable being used. If you're not getting the results you expect, try explicitly using a float, or try setFreq_n8. </p>

<p>Definition at line <a class="el" href="_oscil_8h_source.html#l00108">108</a> of file <a class="el" href="_oscil_8h_source.html">Oscil.h</a>.</p>

</div>
</div>
<a class="anchor" id="aa53724b32bf6e136e06926fb46d20d59"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;unsigned int NUM_CELLS, unsigned int UPDATE_RATE&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_oscil.html">Oscil</a>&lt; NUM_CELLS, UPDATE_RATE &gt;::<a class="el" href="class_oscil.html#a1768d1756a570fc2fe461e6662dff654">setFreq</a> </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>freq</em></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set the oscillator frequency with a float. </p>
<p>Using a float is the most reliable way to set frequencies, Might be slower than using an int but you need either this or setFreq_n8 for fractional frequencies. </p>

<p>Definition at line <a class="el" href="_oscil_8h_source.html#l00121">121</a> of file <a class="el" href="_oscil_8h_source.html">Oscil.h</a>.</p>

</div>
</div>
<a class="anchor" id="a6a4c35443595841b6fbe6416cdc64caf"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;unsigned int NUM_CELLS, unsigned int UPDATE_RATE&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_oscil.html">Oscil</a>&lt; NUM_CELLS, UPDATE_RATE &gt;::<a class="el" href="class_oscil.html#a6a4c35443595841b6fbe6416cdc64caf">setFreq_n8</a> </td>
          <td>(</td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>freq</em></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set the frequency using 24n8 fixed-point number format. </p>
<p>Note: use with caution because it's prone to overflow with higher frequencies and larger table sizes. This might be faster than the float version for setting low frequencies such as 1.5 Hz, or others which may not work well with your table size. An n8 representation of 1.5 is 384 (ie. 1.5 * 256). </p>

<p>Definition at line <a class="el" href="_oscil_8h_source.html#l00093">93</a> of file <a class="el" href="_oscil_8h_source.html">Oscil.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="_oscil_8h_source.html">Oscil.h</a></li>
</ul>
</div><!-- contents -->


<hr class="footer"/><address class="footer"><small>
Generated on Thu May 31 2012 13:12:17 for Cuttlefish by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.0
</small></address>

</body>
</html>
